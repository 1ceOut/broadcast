# 실시간 방송
- 실시간 방송은 Openvidu와 React.js, Webspeech API를 활용하여 제작되었습니다.

## Openvidu 채택 이유
- WebRTC의 통신 방식은 기본적으로 Peer-To-Peer(P2P) 기반이지만 동시 시청자수의 한계 및 품질 저하, 보안 문제 등은 방송자 및 시청자의 입장에서 매우 불편하게 느껴질 수 있습니다.
- Openvidu는 SFU방식을 지원하여 해당 단점을 보완할 수 있다는 장점을 지닙니다.

## SFU ?
- 종단 간 미디어 트래픽을 중계하는 중앙 서버 방식이다.
- 클라이언트 peer간 연결이 아닌, 서버와 클라이언트 간의 peer를 연결한다.
- 1:1, 1:N, N:N 혹은 N:M 등 모든 연결 형식에서 클라이언트는 연결된 모든 사용자에게 데이터를 보낼 필요없이 서버에게만 자신의 영상 데이터를 보내면 된다.(즉, Uplink가 1개다.)
- 하지만 1:N, N:N 혹은 N:M 형식이라면 상대방의 수만큼 데이터를 받는 peer를 유지해야한다.(Downlink는 P2P(Signaling서버)일 때와 동일하다.)
- 1:N 형식 또는 소규모 N:M 형식의 실시간 스트리밍에 적합하다.
- 장점
  - 데이터가 서버를 거치고 Signaling 서버(P2P 방식)를 사용할 때 보다 느리긴하지만 비슷한 수준의 실시간성을 유지할 수 있다.
  - Signaling 서버를 사용하는 것보다 클라이언트가 받는 부하가 줄어든다.

## Openvidu-Component(LiveKit-Component)
- Openvidu는 WebRtc를 지원하기 위해 내부에 LiveKit를 사용하고 있습니다.
- LiveKit은 React.js등 많은 프레임워크를 지원하기 위해 LiveKit-Component라이브러리를 제공하고 있습니다.
- LiveKit은 JWT토큰을 발급받아 해당 JWT를 활용하여 연결을 하는 방식을 채택하고 있습니다. 해당 Spring Boot 서버는 JWT 및 실시간 자막 브로드캐스팅 용도로 구성된 서버입니다.
- 해당 라이브러리를 통해 사용자에게 카메라 및 음성 On/Off, 화면 공유, 채팅기능을 지원하고 있습니다.

## 실시간 자막
- 실시간 자막은 React.js의 WebSpeech API를 활용하여 실시간 자막을 생성합니다.
- 같은 세션에 저장된 유저들에게 Stomp+SocketJS를 활용하여 브로드캐스팅하는 방식을 채택하였습니다.
- 실시간 방송을 시청중인 시청자들에게 실시간으로 제공하여 좀 더 원활한 방식으로 시청 경험을 제공합니다.
